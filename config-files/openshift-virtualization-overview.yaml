kind: ConfigMap
apiVersion: v1
metadata:
  name: openshift-virtualization-overview
  namespace: open-cluster-management-observability
  labels:
    grafana-custom-dashboard: "true"
data:
  openshift-virtualization-overview.json: |
    {"annotations": {"list": [{"builtIn": 1, "datasource": "-- Grafana --", "enable": true, "hide": true, "iconColor": "rgba(0, 211, 255, 1)", "name": "Annotations & Alerts", "target": {"limit": 100, "matchAny": false, "tags": [], "type": "dashboard"}, "type": "dashboard"}]}, "description": "", "editable": true, "gnetId": null, "graphTooltip": 0, "id": 29, "iteration": 1708359569451, "links": [], "panels": [{"datasource": null, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "color-background"}, "mappings": [{"options": {"0": {"color": "green", "index": 0, "text": "Healthy"}, "1": {"color": "yellow", "index": 1, "text": "Warning"}, "2": {"color": "red", "index": 2, "text": "Critical"}}, "type": "value"}], "thresholds": {"mode": "absolute", "steps": [{"color": "transparent", "value": null}]}}, "overrides": []}, "gridPos": {"h": 6, "w": 8, "x": 0, "y": 0}, "id": 6, "options": {"showHeader": true, "sortBy": [{"desc": true, "displayName": "Value"}]}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sort_desc (sum(kubevirt_hyperconverged_operator_health_status{cluster=~\"$cluster\"}) by (cluster))", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}], "title": "Clusters Operator Health", "transformations": [{"id": "organize", "options": {"excludeByName": {"Time": true}, "indexByName": {}, "renameByName": {"Value": "", "cluster": "Cluster", "version": "Version"}}}], "type": "table"}, {"datasource": null, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "auto"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 6, "w": 7, "x": 8, "y": 0}, "id": 4, "options": {"showHeader": true, "sortBy": [{"desc": true, "displayName": "Number of Running Virtual Machines"}]}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sort_desc (sum(cnv:vmi_status_running:count{cluster=~\"$cluster\"}) by (cluster))", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}], "title": "Total Number of Running VMs per cluster", "transformations": [{"id": "organize", "options": {"excludeByName": {"Time": true}, "indexByName": {}, "renameByName": {"Value": "Running Virtual Machines", "cluster": "Cluster", "version": "Version"}}}], "type": "table"}, {"datasource": null, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 6, "w": 9, "x": 15, "y": 0}, "id": 5, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "multi"}}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sort_desc (sum(cnv:vmi_status_running:count{cluster=~\"$cluster\"}) by (cluster))", "format": "time_series", "instant": false, "interval": "", "legendFormat": "{{cluster}}", "refId": "A"}], "title": "Number of running VMs per cluster over time", "transformations": [], "type": "timeseries"}, {"datasource": null, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "auto"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 6, "w": 8, "x": 0, "y": 6}, "id": 7, "options": {"showHeader": true, "sortBy": [{"desc": true, "displayName": "Time"}]}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sum by (cluster, operator_health_impact)(ALERTS{kubernetes_operator_part_of=\"kubevirt\", alertstate=\"firing\",cluster=~\"$cluster\",operator_health_impact=~\"$health_impact\"})", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}], "title": "Clusters CNV Alerts that Impact Operator Health", "transformations": [{"id": "organize", "options": {"excludeByName": {"Time": true}, "indexByName": {}, "renameByName": {"Value": "Number of Alerts", "cluster": "Cluster", "operator_health_impact": "Alert Impact on Operator Health", "version": "Version"}}}], "type": "table"}, {"datasource": null, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "auto"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 6, "w": 7, "x": 8, "y": 6}, "id": 2, "options": {"showHeader": true, "sortBy": [{"desc": true, "displayName": "Time"}]}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sort_desc (count by (cluster, version) (csv_succeeded{name=~\".*hyperconverged.*\",cluster=~\"$cluster\"}))", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}], "title": "Clusters by CNV version", "transformations": [{"id": "organize", "options": {"excludeByName": {"Time": true}, "indexByName": {}, "renameByName": {"Value": "", "cluster": "Cluster", "version": "Version"}}}], "type": "table"}, {"datasource": null, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "palette-classic"}, "custom": {"axisLabel": "", "axisPlacement": "auto", "barAlignment": 0, "drawStyle": "line", "fillOpacity": 0, "gradientMode": "none", "hideFrom": {"legend": false, "tooltip": false, "viz": false}, "lineInterpolation": "linear", "lineWidth": 1, "pointSize": 5, "scaleDistribution": {"type": "linear"}, "showPoints": "auto", "spanNulls": false, "stacking": {"group": "A", "mode": "none"}, "thresholdsStyle": {"mode": "off"}}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": []}, "gridPos": {"h": 6, "w": 9, "x": 15, "y": 6}, "id": 3, "options": {"legend": {"calcs": [], "displayMode": "list", "placement": "bottom"}, "tooltip": {"mode": "multi"}}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sort_desc (count by (cluster,version) (csv_succeeded{name=~\".*hyperconverged.*\",cluster=~\"$cluster\"}))", "format": "time_series", "instant": false, "interval": "", "legendFormat": "{{cluster}}, {{version}}", "refId": "A"}], "title": "Number of Custers with CNV Operator over time", "transformations": [], "type": "timeseries"}, {"datasource": null, "description": "Total number of alerts that are firing.", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "links": [{"targetBlank": true, "title": "", "url": "d/UZJv0TJnz/clusters-by-alert?${__url_time_range}&orgId=1&var-alert=All&var-severity=All&refresh=5m"}], "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "purple", "value": null}]}}, "overrides": []}, "gridPos": {"h": 5, "w": 4, "x": 0, "y": 12}, "id": 10, "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sum (ALERTS{kubernetes_operator_part_of=\"kubevirt\", alertstate=\"firing\",cluster=~\"$cluster\"}) or vector(0)", "interval": "", "legendFormat": "", "refId": "A"}], "title": "Total Alerts", "type": "stat"}, {"datasource": null, "description": "Total number of alerts that are firing with the severity level: critical.", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "links": [{"targetBlank": true, "title": "", "url": "d/UZJv0TJnz/clusters-by-alert?${__url_time_range}&orgId=1&var-alert=All&var-severity=critical"}], "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}]}}, "overrides": []}, "gridPos": {"h": 5, "w": 4, "x": 4, "y": 12}, "id": 12, "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sum (ALERTS{kubernetes_operator_part_of=\"kubevirt\", alertstate=\"firing\",cluster=~\"$cluster\",severity=\"critical\"}) or vector(0)", "interval": "", "legendFormat": "", "refId": "A"}], "title": "Total Critical Alerts", "type": "stat"}, {"datasource": null, "description": "Total number of alerts that are firing with the severity level: warning.", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "links": [{"targetBlank": true, "title": "", "url": "d/UZJv0TJnz/clusters-by-alert?${__url_time_range}&orgId=1&var-alert=All&var-severity=warning"}], "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "orange", "value": null}]}}, "overrides": []}, "gridPos": {"h": 5, "w": 4, "x": 8, "y": 12}, "id": 14, "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sum (ALERTS{kubernetes_operator_part_of=\"kubevirt\", alertstate=\"firing\",cluster=~\"$cluster\",severity=\"warning\"}) or vector(0)", "interval": "", "legendFormat": "", "refId": "A"}], "title": "Total Warning Alerts", "type": "stat"}, {"datasource": null, "description": "Total number of alerts that are firing with the severity level: warning.", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "links": [{"targetBlank": true, "title": "", "url": "d/UZJv0TJnz/clusters-by-alert?${__url_time_range}&orgId=1&var-alert=All&var-severity=warning"}], "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "light-blue", "value": null}]}}, "overrides": []}, "gridPos": {"h": 5, "w": 4, "x": 12, "y": 12}, "id": 15, "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sum (ALERTS{kubernetes_operator_part_of=\"kubevirt\", alertstate=\"firing\",cluster=~\"$cluster\",severity=\"info\"}) or vector(0)", "interval": "", "legendFormat": "", "refId": "A"}], "title": "Total Info Alerts", "type": "stat"}, {"datasource": null, "description": "Total number of alerts that are firing with the operator_health_impact level: critical.", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "links": [{"targetBlank": true, "title": "", "url": "d/UZJv0TJnz/clusters-by-alert?${__url_time_range}&orgId=1&var-alert=All&var-severity=warning"}], "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "red", "value": null}]}}, "overrides": []}, "gridPos": {"h": 5, "w": 4, "x": 16, "y": 12}, "id": 16, "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sum (ALERTS{kubernetes_operator_part_of=\"kubevirt\", alertstate=\"firing\",cluster=~\"$cluster\",operator_health_impact=\"critical\"}) or vector(0)", "interval": "", "legendFormat": "", "refId": "A"}], "title": "Total Critical Operator Health Alerts", "type": "stat"}, {"datasource": null, "description": "Total number of alerts that are firing with the operator_health_impact level: critical.", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "links": [{"targetBlank": true, "title": "", "url": "d/UZJv0TJnz/clusters-by-alert?${__url_time_range}&orgId=1&var-alert=All&var-severity=warning"}], "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "orange", "value": null}]}}, "overrides": []}, "gridPos": {"h": 5, "w": 4, "x": 20, "y": 12}, "id": 17, "options": {"colorMode": "background", "graphMode": "area", "justifyMode": "auto", "orientation": "auto", "reduceOptions": {"calcs": ["lastNotNull"], "fields": "", "values": false}, "text": {}, "textMode": "auto"}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sum (ALERTS{kubernetes_operator_part_of=\"kubevirt\", alertstate=\"firing\",cluster=~\"$cluster\",operator_health_impact=\"warning\"}) or vector(0)", "interval": "", "legendFormat": "", "refId": "A"}], "title": "Total Warning Operator Health Alerts", "type": "stat"}, {"datasource": null, "description": "", "fieldConfig": {"defaults": {"color": {"mode": "thresholds"}, "custom": {"align": "auto", "displayMode": "auto"}, "mappings": [], "thresholds": {"mode": "absolute", "steps": [{"color": "green", "value": null}, {"color": "red", "value": 80}]}}, "overrides": [{"matcher": {"id": "byName", "options": "Alert Name"}, "properties": [{"id": "custom.width", "value": null}]}, {"matcher": {"id": "byName", "options": "Namespace"}, "properties": [{"id": "custom.width", "value": null}]}]}, "gridPos": {"h": 7, "w": 24, "x": 0, "y": 17}, "id": 8, "options": {"showHeader": true, "sortBy": [{"desc": true, "displayName": "Number of Alerts"}]}, "pluginVersion": "8.5.20", "targets": [{"exemplar": true, "expr": "sum by (cluster,alertname,container,kubernetes_operator_component, namespace, operator_health_impact, severity,cron_name,ns) (ALERTS{kubernetes_operator_part_of=\"kubevirt\", alertstate=\"firing\",cluster=~\"$cluster\",operator_health_impact=~\"$health_impact\",severity=~\"$severity\"})", "format": "table", "instant": true, "interval": "", "legendFormat": "", "refId": "A"}], "title": "Clusters CNV Alerts", "transformations": [{"id": "organize", "options": {"excludeByName": {"Time": true, "Value": false, "__name__": true, "alertstate": true, "clusterID": true, "endpoint": true, "instance": true, "job": true, "kubernetes_operator_part_of": true, "name": true, "node": true, "pod": true, "receive": true, "service": true, "tenant_id": true}, "indexByName": {"Time": 0, "Value": 10, "alertname": 2, "cluster": 1, "container": 7, "cron_name": 8, "kubernetes_operator_component": 5, "namespace": 6, "ns": 9, "operator_health_impact": 4, "severity": 3}, "renameByName": {"Value": "Number of Alerts", "alertname": "Alert Name", "alertstate": "", "cluster": "Cluster", "container": "Container", "endpoint": "", "kubernetes_operator_component": "Component", "kubernetes_operator_part_of": "", "name": "", "namespace": "Namespace", "node": "", "operator_health_impact": "Alert Impact on Operator Health", "severity": "Severity", "version": "Version"}}}], "type": "table"}], "refresh": "5s", "schemaVersion": 30, "style": "dark", "tags": [], "templating": {"list": [{"allValue": null, "current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "datasource": null, "definition": "label_values(csv_succeeded{name=~\".*hyperconverged.*\"}, cluster)", "description": null, "error": null, "hide": 0, "includeAll": true, "label": "Cluster", "multi": true, "name": "cluster", "options": [], "query": {"query": "label_values(csv_succeeded{name=~\".*hyperconverged.*\"}, cluster)", "refId": "StandardVariableQuery"}, "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query"}, {"allValue": null, "current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "datasource": null, "definition": "label_values(ALERTS{kubernetes_operator_part_of=\"kubevirt\"}, severity)", "description": null, "error": null, "hide": 0, "includeAll": true, "label": "Severity", "multi": true, "name": "severity", "options": [], "query": {"query": "label_values(ALERTS{kubernetes_operator_part_of=\"kubevirt\"}, severity)", "refId": "StandardVariableQuery"}, "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query"}, {"allValue": null, "current": {"selected": true, "text": ["All"], "value": ["$__all"]}, "datasource": null, "definition": "label_values(ALERTS{kubernetes_operator_part_of=\"kubevirt\"}, operator_health_impact)", "description": null, "error": null, "hide": 0, "includeAll": true, "label": "Alert Health Impact", "multi": true, "name": "health_impact", "options": [], "query": {"query": "label_values(ALERTS{kubernetes_operator_part_of=\"kubevirt\"}, operator_health_impact)", "refId": "StandardVariableQuery"}, "refresh": 2, "regex": "", "skipUrlSync": false, "sort": 0, "type": "query"}]}, "time": {"from": "now-6h", "to": "now"}, "timepicker": {}, "timezone": "", "title": "OpenShift Virtualization Overview", "version": 35}
